#查看开机信息
dmesg
#查看文件版本
md5sum

---------------
## 基础
使用命令行工具，如top、htop或ps等。
top：在终端中输入top命令，然后按"M"键按照内存占用排序进程。
htop：如果已安装htop工具，可以输入htop命令来查看进程和其内存占用情况。
ps：使用ps aux --sort -rss命令来列出进程并按照内存占用排序。

## 查看内存占用前10名的程序
ps aux | sort -k4,4nr | head -n 5
top -p 2913
cat /proc/2913/status 
## 对于内存泄露
dmesg -T| grep oom-killer
## 显示已经运行的进程的CPU亲和性
taskset -p pid
## 法获取某进程中运行中的线程数量（PID指的是进程ID）
ls /proc/PID/task | wc -l

## 使用cgroups进行内存限制
--------------
## 通过 top/vmstat/procinfo 等确定内存使用是否过高，内存交换空间不断增加。

1.  **内核使用内存在增加？**  
    使用 slabtop 查看内核使用内存是否增加或者使用量过大。
1.  **内核使用的内存类型是什么？**  
    使用 slabtop 排序内核使用内存情况，找出使用内存较大的对象名字。通过搜索或查询相关分配对象名字（如 inode_cache），确定它用于哪些文件或属于哪个子系统，就有可能弄清楚内存分配的原因。
1.  **进程使用内存在增加？**  
    使用 top/ps 按内存使用量排序并观察 rss 等字段看进程使用物理内存是否增加。
1.  1.  **进程使‍用的内存类型是什么？**  
        通过 /proc/<pid>/status 查看内存使用情况。如 VmExe 值很大，则说明可执行文件本身很大，需要确定哪些函数文本比较大。VmLib 很大，则说明应用程序使用了大量或者体积比较大的共享库，需要确定哪些库导致了 VmLib 很大。VmData 较大并在增加，说明进程的数据区或堆在增加。
    1.  **哪些函数使用大量的栈空间？**  
        使用 gdb attach 进程，根据调用栈信息计算当前栈指针和前一个栈指针的差值，这个差值即为函数的栈容量，找到栈容量比较大的函数。
    1.  **哪些函数分配大量的堆内存？**  
        使用memprof找到哪些函数分配了堆内存并观察哪些进程的堆内存在增加，确定是否存在不合理的分配或者内存泄漏问题。
    1.  **哪些库比较大？**  
        通过 /proc/<pid>/maps 查看进程使用了哪些共享库和以及这些库的大小，对于太大的共享库是否可能替换成大小更小的版本。或者某个库已经被其他进程加载到内存使用，只是版本不同，则可以改成共用一个版本。
    1.  **哪些函数文本较大？**  
        如果进程的可执行文件本身比较大，加载到内存后会占用更多的空间。可以通过 nm 命令排序符号大小，找出文本段较大的函数看是否可以删除或者减小其大小。
    1.  **共享内存使用量在增加？**  
        使用 ipcs 查看共享内存信息，是否存在过大或者共享内存数量不断增加。
    1.  **哪个进程在使用共享内存？**  
        使用 ipcs -p 查看哪些进程创建和使用了共享内存。对于共享内存过大问题，可以查看其程序代码看分配是否合理。对于共享内存数不断增加，是否存在创建后未删除等问题。